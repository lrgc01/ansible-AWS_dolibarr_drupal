---
#- name: Apt repositories for certbot ----------------------
#  apt_repository:
#    repo: ppa:certbot/certbot
#  register: certbot_repo_added
#  tags: update_repository
#
- name: Install python if not installed -------------------
  raw: "if [ ! -f /usr/bin/python ] ; then apt install -y python ; exit 0 ; fi"
  tags: bootstrap_python

- name: Update cache and upgrade (may take a time) --------
  apt: 
    update_cache: "{{ update_cache_y_n }}"
    upgrade: "{{ update_cache_y_n }}"
  when: update_cache_y_n == "yes"
  register: updated_cache
  tags: update_repository

- name: Install vary basic packages to run ansible --------
  apt:
    pkg: "{{ item.pkg }}"
    state: "present"
  loop: "{{ base_dep_pkg_list }}"
  when: base_dep_pkg_list[0]
  register: base_dep_pkg_installed
  tags: install_dep_pkg
